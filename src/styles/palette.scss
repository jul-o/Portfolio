@use 'sass:color';

$themes: (
	'dark': (
		'primary': #131313,
		'primary-light': #003c4d,
		'primary-lighter': #004f66,
		'primary-lighterer': #007799,
		'primary-lightererer': #00c6ff,

		// 'secondary': #e07a00,
		// 'secondary': #d6660a,
		'secondary': #007799,
		'dark-grey': #28373b,
		'medium-grey': #96a5a9,
		'light-grey': #e1e5e6,
		'theme': 'dark',
	),
	'light': (
		'primary': #e9f7fbff,
		'primary-light': #a7def1ff,
		'primary-lighter': #67c8e4ff,
		'primary-lighterer': #229fc3ff,
		'primary-lightererer': #176a82ff,

		'secondary': #e07a00,
		'dark-grey': #e1e5e6,
		'medium-grey': #96a5a9,
		'light-grey': #28373b,
		'theme': 'light',
	),
);

@mixin themed() {
	// for each theme defined in $themes
	@each $theme, $map in $themes {
		// define a new matcher
		[data-theme='#{$theme}'] & {
			// define a global variable containing a hash of all current values of the theme
			$theme-map: () !global;
			@each $key, $submap in $map {
				$value: map-get(map-get($themes, $theme), '#{$key}');
				$theme-map: map-merge(
					$theme-map,
					(
						$key: $value,
					)
				) !global;
			}
			@debug $theme-map;
			// execute mixin's original content
			@content;
			// delete $theme-map;
			$theme-map: null !global;
		}
	}
}

// New function t that will read the value of the key in the temporary hash defined by the mixin
@function t($key) {
	@return map-get($theme-map, $key);
}
